adding a
1 files updated, 0 files merged, 0 files removed, 0 files unresolved
created new head
1 files updated, 0 files merged, 0 files removed, 0 files unresolved
created new head
1 files updated, 0 files merged, 0 files removed, 0 files unresolved
% should fail because not at a head
abort: branch 'default' has 3 heads - please merge with an explicit rev
(run 'hg heads .' to see heads)
1 files updated, 0 files merged, 0 files removed, 0 files unresolved
% should fail because > 2 heads
abort: branch 'default' has 3 heads - please merge with an explicit rev
(run 'hg heads .' to see heads)
% should succeed
0 files updated, 0 files merged, 0 files removed, 0 files unresolved
(branch merge, don't forget to commit)
% should succeed - 2 heads
changeset:   3:903c264cdf57
parent:      1:ba677d0156c1
user:        test
date:        Thu Jan 01 00:00:00 1970 +0000
summary:     d

0 files updated, 0 files merged, 0 files removed, 0 files unresolved
(branch merge, don't forget to commit)
% should fail because at tip
abort: there is nothing to merge
1 files updated, 0 files merged, 0 files removed, 0 files unresolved
% should fail because 1 head
abort: there is nothing to merge - use "hg update" instead
1 files updated, 0 files merged, 0 files removed, 0 files unresolved
marked working directory as branch foobranch
created new head
% should fail because merge with other branch
abort: branch 'foobranch' has one head - please merge with an explicit rev
(run 'hg heads' to see all heads)
