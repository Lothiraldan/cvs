% tedious monotone keys configuration
% create monotone repository
mtn: adding a to workspace manifest
mtn: adding bin to workspace manifest
mtn: adding c to workspace manifest
mtn: adding dir to workspace manifest
mtn: adding dir/b to workspace manifest
mtn: adding dir/d to workspace manifest
mtn: beginning commit on branch 'com.selenic.test'
mtn: committed revision 0f6e5e4f2e7d2a8ef312408f57618abf026afd90
% update monotone working directory
mtn: skipping dir, already accounted for in workspace
mtn: renaming a to dir/a in workspace manifest
mtn: dropping c from workspace manifest
mtn: beginning commit on branch 'com.selenic.test'
mtn: committed revision 51d0a982464573a2a2cf5ee2c9219c652aaebeff
% convert once
assuming destination repo.mtn-hg
initializing destination repo.mtn-hg repository
scanning source...
sorting...
converting...
1 initialize
0 update1
mtn: adding e to workspace manifest
mtn: dropping dir/b from workspace manifest
mtn: renaming bin to bin2 in workspace manifest
mtn: beginning commit on branch 'com.selenic.test'
mtn: committed revision ebe58335d85d8cb176b6d0a12be04f5314b998da
% test directory move
mtn: adding dir1 to workspace manifest
mtn: adding dir1/subdir1 to workspace manifest
mtn: adding dir1/subdir1/file1 to workspace manifest
mtn: adding dir1/subdir2_other to workspace manifest
mtn: adding dir1/subdir2_other/file1 to workspace manifest
mtn: beginning commit on branch 'com.selenic.test'
mtn: committed revision a8d62bc04fee4d2936d28e98bbcc81686dd74306
mtn: skipping dir1, already accounted for in workspace
mtn: renaming dir1/subdir1 to dir1/subdir2 in workspace manifest
mtn: beginning commit on branch 'com.selenic.test'
mtn: committed revision 2c3d241bbbfe538b1b51d910f5676407e3f4d3a6
% test subdirectory move
mtn: renaming dir to dir2 in workspace manifest
mtn: dropping dir2/d from workspace manifest
mtn: adding dir2/newfile to workspace manifest
mtn: beginning commit on branch 'com.selenic.test'
mtn: committed revision fdb5a02dae8bfce3a79b3393680af471016e1b4c
mtn: beginning commit on branch 'com.selenic.test'
mtn: committed revision 8bbf76d717001d24964e4604739fdcd0f539fc88
mtn: dropping dir2/dir/subdir/f from workspace manifest
mtn: dropping dir2/dir/subdir from workspace manifest
mtn: dropping dir2/dir/emptydir from workspace manifest
mtn: dropping dir2/dir from workspace manifest
mtn: beginning commit on branch 'com.selenic.test'
mtn: committed revision 2323d4bc324e6c82628dc04d47a9fd32ad24e322
% convert incrementally
assuming destination repo.mtn-hg
scanning source...
sorting...
converting...
5 update2 "with" quotes
4 createdir1
3 movedir1
2 movedir
1 emptydir
0 dropdirectory
6 files updated, 0 files merged, 0 files removed, 0 files unresolved
@  7 "dropdirectory" files: dir2/dir/subdir/f
|
o  6 "emptydir" files: dir2/dir/subdir/f
|
o  5 "movedir" files: dir/a dir/d dir2/a dir2/newfile
|
o  4 "movedir1" files: dir1/subdir1/file1 dir1/subdir2/file1
|
o  3 "createdir1" files: dir1/subdir1/file1 dir1/subdir2_other/file1
|
o  2 "update2 "with" quotes" files: bin bin2 dir/b e
|
o  1 "update1" files: a bin c dir/a dir/b
|
o  0 "initialize" files: a bin c dir/b dir/d

% manifest
bin2
dir1/subdir2/file1
dir1/subdir2_other/file1
dir2/a
dir2/newfile
e
% contents
a
a
% file move
copies:      dir/a (a)
% check directory move
bin2
dir/a
dir/d
dir1/subdir2/file1
dir1/subdir2_other/file1
e
copies:      dir1/subdir2/file1 (dir1/subdir1/file1)
% check file remove with directory move
bin2
dir1/subdir2/file1
dir1/subdir2_other/file1
dir2/a
dir2/newfile
e
