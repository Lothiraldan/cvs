adding changesets
adding manifests
adding file changes
added 1 changesets with 1 changes to 1 files
(run 'hg update' to get a working copy)
1 files updated, 0 files merged, 0 files removed, 0 files unresolved
% should fail with encoding error
M a
? latin-1
? latin-1-tag
? utf-8
abort: decoding near ' encoded: é': 'ascii' codec can't decode byte 0xe9 in position 20: ordinal not in range(128)!

transaction abort!
rollback completed
% these should work
% ascii
changeset:   4:d8a5d9eaf41e
branch:      ?
tag:         tip
user:        test
date:        Thu Jan 01 00:00:00 1970 +0000
summary:     latin1 branch

changeset:   3:5edfc7acb541
user:        test
date:        Thu Jan 01 00:00:00 1970 +0000
summary:     Added tag ? for changeset 91878608adb3

changeset:   2:91878608adb3
tag:         ?
user:        test
date:        Thu Jan 01 00:00:00 1970 +0000
summary:     utf-8 e' encoded: ?

changeset:   1:6355cacf842e
user:        test
date:        Thu Jan 01 00:00:00 1970 +0000
summary:     latin-1 e' encoded: ?

changeset:   0:60aad1dd20a9
user:        test
date:        Thu Jan 01 00:00:00 1970 +0000
summary:     latin-1 e': ?

% latin-1
changeset:   4:d8a5d9eaf41e
branch:      é
tag:         tip
user:        test
date:        Thu Jan 01 00:00:00 1970 +0000
summary:     latin1 branch

changeset:   3:5edfc7acb541
user:        test
date:        Thu Jan 01 00:00:00 1970 +0000
summary:     Added tag é for changeset 91878608adb3

changeset:   2:91878608adb3
tag:         é
user:        test
date:        Thu Jan 01 00:00:00 1970 +0000
summary:     utf-8 e' encoded: é

changeset:   1:6355cacf842e
user:        test
date:        Thu Jan 01 00:00:00 1970 +0000
summary:     latin-1 e' encoded: é

changeset:   0:60aad1dd20a9
user:        test
date:        Thu Jan 01 00:00:00 1970 +0000
summary:     latin-1 e': é

% utf-8
changeset:   4:d8a5d9eaf41e
branch:      Ã©
tag:         tip
user:        test
date:        Thu Jan 01 00:00:00 1970 +0000
summary:     latin1 branch

changeset:   3:5edfc7acb541
user:        test
date:        Thu Jan 01 00:00:00 1970 +0000
summary:     Added tag Ã© for changeset 91878608adb3

changeset:   2:91878608adb3
tag:         Ã©
user:        test
date:        Thu Jan 01 00:00:00 1970 +0000
summary:     utf-8 e' encoded: Ã©

changeset:   1:6355cacf842e
user:        test
date:        Thu Jan 01 00:00:00 1970 +0000
summary:     latin-1 e' encoded: Ã©

changeset:   0:60aad1dd20a9
user:        test
date:        Thu Jan 01 00:00:00 1970 +0000
summary:     latin-1 e': Ã©

% ascii
tip                                4:d8a5d9eaf41e
?                                  2:91878608adb3
% latin-1
tip                                4:d8a5d9eaf41e
é                                  2:91878608adb3
% utf-8
tip                                4:d8a5d9eaf41e
Ã©                                  2:91878608adb3
% ascii
?                              4:d8a5d9eaf41e
% latin-1
é                              4:d8a5d9eaf41e
% utf-8
Ã©                              4:d8a5d9eaf41e
